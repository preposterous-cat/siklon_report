<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cyclone Report</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"
      integrity="sha512-Zcn6bjR/8RZbLEpLIeOwNtzREBAJnUKESxces60Mpoj+2okopSAcSUIUOseddDm0cxnGQzxIR7vJgsLZbdLE3w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/leaflet-easyprint@2.1.9/libs/leaflet.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw-src.css"
      integrity="sha512-vJfMKRRm4c4UupyPwGUZI8U651mSzbmmPgR3sdE3LcwBPsdGeARvUM5EcSTg34DK8YIRiIo+oJwNfZPMKEQyug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/leaflet-modal@0.2.0/dist/leaflet.modal.min.css"
    />
    <link
      href="{{ url_for('static', filename='leaflet/leaflet.draw.svg.css') }}"
      rel="stylesheet"
      crossorigin=""
    />
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-dark"
      aria-label="Offcanvas navbar large"
    >
      <div class="container-fluid">
        <a class="navbar-brand text-info" href="#">Cyclon Report</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasNavbar2"
          aria-controls="offcanvasNavbar2"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="offcanvas offcanvas-end text-bg-dark"
          tabindex="-1"
          id="offcanvasNavbar2"
          aria-labelledby="offcanvasNavbar2Label"
        >
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasNavbar2Label">
              Offcanvas
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  data-bs-toggle="offcanvas"
                  data-bs-target="#offcanvasRight"
                  aria-controls="offcanvasRight"
                  >Option</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <!-- Offcanvas -->
    <div
      class="offcanvas offcanvas-end"
      data-bs-scroll="true"
      data-bs-backdrop="false"
      tabindex="-1"
      id="offcanvasRight"
      aria-labelledby="offcanvasRightLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasRightLabel">Pilih wilayah</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body">
        <div class="wilayahParent">
          <div class="row wilayahChild mb-2">
            <div class="col-sm-2 text-dark">
              <button class="btn btn-info addWilayah">Add</button>
            </div>
            <div class="col-sm-10">
              <select
                class="form-select daftarWilayah"
                aria-label="Default select example"
              >
                <option selected>Pilih wilayah</option>
              </select>
            </div>
          </div>
        </div>
        <br />
        <br />
        <div class="row">
          <button class="btn btn-primary process">Process</button>
        </div>
      </div>
    </div>
    <!-- End Offcanvas -->
    <div class="container my-1">
      <div class="col-sm-12 py-5 mx-auto">
        <div id="map"></div>
      </div>
    </div>

    <div class="container my-1">
      <div class="col-sm-12 py-5 mx-auto">
        <img id="image-temp" class="img-fluid" />
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>

    <!-- <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA1MgLuZuyqR_OGY3ob3M52N46TDBRI_9k&callback=initMap&v=weekly"
      defer
    ></script> -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet-src.js"
      integrity="sha512-x4B5AXtD8SqDqEpzOFXxCE0OOUhQ0Fep3Qka6WtUa3tw7z4fC7eOI4Vjm191HB63//4Y554Zxydbt2Hi8b+bVQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- <script
      src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"
      integrity="sha512-BwHfrr4c9kmRkLw6iXFdzcdWV/PGkVgiIyIWLLlTSXzWQzxuSg4DiQUCpauz/EWjgk5TYQqX/kvn9pG1NpYfqg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script> -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
      integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easyprint@2.1.9/dist/bundle.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw-src.js"
      integrity="sha512-czICF/Crp0B7QB13iQZG9bYUpd/P1Ona1NeZN52gYsoVFXIpakDmdOUepMCHCMBIBd9Ei5Mlg8Quy4e504IT5A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-modal@0.2.0/dist/L.Modal.min.js"></script>
    <script src="{{ url_for('static', filename='leaflet/leaflet.draw.svg.js') }}"></script>
    <script>
      L.Draw.Svg.include({
        enable: function () {
          let drawsvg = this;

          this._map.fire("modal", {
            title: "Open SVG",
            content: [
              "Select an SVG to show it on the map<br>",
              "<table>",
              "  <tr>",
              '    <td>file:</td><td><input type="file" id="file-input" /></td>',
              "  <tr></tr>",
              '    <td>scale:</td><td><input type="number" id="scale" name="scale" min="0.000001" max="10.0" value="0.01"></td>',
              "  </tr>",
              "</table><br>",
            ].join(""),

            template: [
              '<div class="modal-header"><h2>{title}</h2></div>',
              "<hr>",
              '<div class="modal-body">{content}</div>',
              '<div class="modal-footer">',
              '  <button class="topcoat-button--large {OK_CLS}">{okText}</button>',
              '  <button class="topcoat-button--large {CANCEL_CLS}">{cancelText}</button>',
              "</div>",
            ].join(""),

            okText: "Ok",
            cancelText: "Cancel",
            OK_CLS: "modal-ok",
            CANCEL_CLS: "modal-cancel",

            width: 500,

            onShow: function (evt) {
              let modal = evt.modal;
              let imported = null;

              L.DomEvent.on(
                modal._container.querySelector("#file-input"),
                "change",
                function (e) {
                  let file = e.target.files[0];
                  if (!file) {
                    return;
                  }
                  let reader = new FileReader();
                  reader.onload = function (e) {
                    imported = e.target.result;
                  };
                  reader.readAsText(file);
                }
              )
                .on(
                  modal._container.querySelector(".modal-ok"),
                  "click",
                  function () {
                    if (imported != null) {
                      drawsvg._svgViewBox = "calculate";
                      drawsvg._svgFitBounds = true;
                      drawsvg._scale =
                        modal._container.querySelector("#scale").valueAsNumber;
                      drawsvg._template = imported;
                      L.Draw.SimpleShape.prototype.enable.call(drawsvg);
                    }
                    modal.hide();
                  }
                )
                .on(
                  modal._container.querySelector(".modal-cancel"),
                  "click",
                  function () {
                    modal.hide();
                  }
                );
            },
          });
        },
      });
    </script>
    <script
      type="module"
      src="{{ url_for('static', filename='app.js') }}"
    ></script>
  </body>
</html>
